<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.syys.web.dao.mapper.UserMapper" >

  <resultMap id="BaseResultMap" type="com.syys.web.dao.entity.User" >
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="userName" property="username" jdbcType="VARCHAR" />
    <result column="passWord" property="password" jdbcType="VARCHAR" />
    <!--typeHandler="org.apache.ibatis.type.EnumTypeHandler"-->
    <result column="user_sex" property="userSex" jdbcType="VARCHAR" typeHandler="com.syys.web.dao.EnumHandler.UserSexTypeHandler" />
    <result column="nick_name" property="nickName" jdbcType="VARCHAR" />
  </resultMap>
  
  <insert id="addUser" parameterType="user" >
    <selectKey keyProperty="id" resultType="string" order="BEFORE" >
      SELECT UUID()
    </selectKey>
    INSERT INTO USERS (ID,USERNAME,PASSWORD,USER_SEX,NICK_NAME)
    VALUE (#{id},#{username},#{password},#{userSex,typeHandler=com.syys.web.dao.EnumHandler.UserSexTypeHandler},#{nickName})
  </insert>

  <!--  useGeneratedKeys="true" keyProperty="id" -->
  <insert id="addUsers" parameterType="list">
    <selectKey keyProperty="id" resultType="string" order="BEFORE"  >
      SELECT UUID()
    </selectKey>
    INSERT INTO USERS (ID,USERNAME,PASSWORD,USER_SEX,NICK_NAME) values
    <foreach item="user" collection="list" separator=",">
      (#{id},#{user.username},#{user.password},#{user.userSex,typeHandler=com.syys.web.dao.EnumHandler.UserSexTypeHandler},#{user.nickName})
    </foreach>
  </insert>

  <select id="findUser" resultMap="BaseResultMap">
    SELECT * FROM USERS
  </select>

  <!--<base id="userColumns"> #{id},#{username},#{password},#{userSex},#{nickName} </base>-->
</mapper>